<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>تسجيل بيانات العمرة 2026</title>

<style>
*{box-sizing:border-box}
body{font-family:Arial,sans-serif;background:#f6f7fb;margin:0;padding:24px}
.wrap{max-width:820px;margin:auto}
.card{background:#fff;padding:22px;border-radius:16px;box-shadow:0 10px 30px rgba(0,0,0,.08)}
h2{margin:0 0 14px;text-align:center}
.grid{display:grid;grid-template-columns:1fr 1fr;gap:12px}
label{display:block;margin:10px 0 6px;font-weight:700}
input,select{width:100%;padding:11px;border-radius:10px;border:1px solid #d8d8d8}
.full{grid-column:1/-1}
button{width:100%;margin-top:16px;padding:13px 16px;background:#2e7d32;color:#fff;border:0;border-radius:12px;cursor:pointer;font-size:16px}
button:disabled{opacity:.6;cursor:not-allowed}
.note{font-size:13px;color:#666;margin-top:8px}
.msg{margin-top:14px;padding:12px;border-radius:12px;display:none}
.err{background:#fff3f3;color:#900}
.ok{background:#f3fff3;color:#070}
.sep{height:1px;background:#eee;margin:16px 0}
</style>
</head>

<body>
<div class="wrap">
<div class="card">

<h2>بيانات تسجيل العمرة 2026</h2>
<div id="out" class="msg"></div>

<div class="grid">
<div>
<label>الرقم المدني</label>
<input id="civil" disabled/>
</div>

<div>
<label>رقم الصندوق</label>
<input id="box" disabled/>
</div>

<div class="full">
<label>الاسم</label>
<input id="name" placeholder="الاسم الكامل"/>
</div>

<div>
<label>رقم الموبايل</label>
<input id="mobile" inputmode="tel" placeholder="مثال: 5xxxxxxx"/>
</div>

<div class="full">
<label>رقم جواز السفر</label>
<input id="passport_no" placeholder="Passport No."/>
</div>

<div class="full">
<label>صورة البطاقة المدنية</label>
<input id="app_civil_file" type="file" accept="image/*"/>
</div>

<div class="full">
<label>صورة جواز السفر</label>
<input id="app_passport_file" type="file" accept="image/*"/>
</div>
</div>

<div class="sep"></div>

<select id="has_companion">
<option value="no">لا</option>
<option value="spouse">زوج/زوجة</option>
<option value="mahram">محرم</option>
</select>

<div id="companionBox" style="display:none; margin-top:15px;">
<div class="grid">
<div class="full">
<label>اسم المرافق</label>
<input id="c_name"/>
</div>

<div>
<label>الرقم المدني للمرافق</label>
<input id="c_civil" inputmode="numeric"/>
</div>

<div>
<label>رقم جواز المرافق</label>
<input id="c_passport_no"/>
</div>

<div class="full">
<label>صورة البطاقة المدنية للمرافق</label>
<input id="c_civil_file" type="file" accept="image/*"/>
</div>

<div class="full">
<label>صورة جواز المرافق</label>
<input id="c_passport_file" type="file" accept="image/*"/>
</div>
</div>
</div>

<button id="btn" type="button" onclick="submitForm()">إرسال البيانات</button>

</div>
</div>

<script>

function showMsg(txt,type){
const el=document.getElementById("out");
el.style.display="block";
el.className="msg "+(type==="err"?"err":"ok");
el.textContent=txt;
}

function getParam(n){
return new URLSearchParams(location.search).get(n)||"";
}

function fillIds_(){
civil.value=getParam("civil_id")||sessionStorage.getItem("civil_id")||"";
box.value=getParam("box_number")||sessionStorage.getItem("box_number")||"";
}

/* ====== FIXED TOGGLE ====== */
function toggleCompanion(){
const val=document.getElementById("has_companion").value;
const box=document.getElementById("companionBox");
box.style.display=(val==="spouse"||val==="mahram")?"block":"none";
}

/* ربط مضمون */
document.addEventListener("DOMContentLoaded",()=>{
fillIds_();
const sel=document.getElementById("has_companion");
sel.addEventListener("change",toggleCompanion);
toggleCompanion();
});

</script>
</body>
</html>
